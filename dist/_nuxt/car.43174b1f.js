import{u as B}from"./useCars.8340edd6.js";import{h as x,g,I as A,i as M,o as p,c as d,a as e,t as _,b as i,w as v,v as h,J as V,j as y,F as j,r as R,k as z,C as $,n as E,m as L,K as S,f as w,L as C,_ as T}from"./entry.8c71bdde.js";import{u as U}from"./composables.0f007f17.js";import{u as q}from"./useUtilities.50e64ac7.js";const I={class:"shadow-lg border w-64 mr-10 z-30 h-[190px]"},D={class:"p-5 flex justify-between relative cursor-pointer border-b"},F=e("h3",null,"Location",-1),H={key:0,class:"absolute border shadow left-56 p-5 top-1 -m-1 bg-white"},G={class:"p-5 flex justify-between relative cursor-pointer border-b"},J=e("h3",null,"Make",-1),K={key:0,class:"absolute border shadow left-56 p-5 top-1 -m-1 w-[600px] flex justify-between flex-wrap bg-white"},O=["onClick"],Q={class:"p-5 flex justify-between relative cursor-pointer border-b"},W=e("h3",null,"Price",-1),X={key:0,class:"absolute border sahow left-56 p-5 top-1 -m-1 bg-white"},Y={__name:"SideBar",setup(f){const{makes:a}=B(),u=x({make:!1,location:!1,price:!1}),n=x(""),r=x({min:"",max:""}),o=g(),m=A(),b=M(()=>{const l=o.query.minPrice,t=o.query.maxPrice;return!l&&!t?"Any":!l&&t?`< $${t}`:l&&!t?`> $${l}`:`$${l}-$${t}`}),c=l=>{u.value[l]=!u.value[l]},k=()=>{if(!!n.value){if(!isNaN(parseInt(n.value)))throw z({statusCode:400,message:"Invalid city format"});c("location"),$(`/city/${n.value}/car/${o.params.make}`),n.value=""}},P=l=>{c("make"),$(`/city/${o.params.city}/car/${l}`)},N=()=>{c("price"),!(r.value.max&&r.value.min&&r.value.min>r.value.max)&&m.push({query:{minPrice:r.value.min,maxPrice:r.value.max}})};return(l,t)=>(p(),d("div",I,[e("div",D,[F,e("h3",{onClick:t[0]||(t[0]=s=>c("location")),class:"text-blue-400 capitalize"},_(i(o).params.city),1),i(u).location?(p(),d("div",H,[v(e("input",{type:"text",class:"border p-1 rounded","onUpdate:modelValue":t[1]||(t[1]=s=>V(n)?n.value=s:null)},null,512),[[h,i(n)]]),e("button",{onClick:k,class:"bg-blue-400 w-full mt-2 rounded text-white p-1"}," Apply ")])):y("",!0)]),e("div",G,[J,e("h3",{class:"text-blue-400 capitalize",onClick:t[2]||(t[2]=s=>c("make"))},_(i(o).params.make||"Any"),1),i(u).make?(p(),d("div",K,[(p(!0),d(j,null,R(i(a),s=>(p(),d("h4",{key:s,class:"w-1/3",onClick:ae=>P(s)},_(s),9,O))),128))])):y("",!0)]),e("div",Q,[W,e("h3",{class:"text-blue-400 capitalize",onClick:t[3]||(t[3]=s=>c("price"))},_(i(b)),1),i(u).price?(p(),d("div",X,[v(e("input",{class:"border p-1 rounded",type:"number",placeholder:"Min","onUpdate:modelValue":t[4]||(t[4]=s=>i(r).min=s)},null,512),[[h,i(r).min]]),v(e("input",{class:"border p-1 rounded",type:"number",placeholder:"Max","onUpdate:modelValue":t[5]||(t[5]=s=>i(r).max=s)},null,512),[[h,i(r).max]]),e("button",{class:"bg-blue-400 w-full mt-2 rounded text-white p-1",onClick:N}," Apply ")])):y("",!0)])]))}},Z=E({emits:{error(f){return!0}},setup(f,{slots:a,emit:u}){const n=x(null),r=L();return S(o=>{if(!r.isHydrating)return u("error",o),n.value=o,!1}),()=>{var o,m;return n.value?(o=a.error)==null?void 0:o.call(a,{error:n}):(m=a.default)==null?void 0:m.call(a)}}}),ee={class:"mt-32 flex"},te={class:"text-center mx-auto flex flex-col"},oe=e("h1",{class:"text-5xl text-red-600 mb-4"}," Sorry, something went wrong ",-1),re=["onClick"],ue={__name:"car",setup(f){const a=g(),{toTitleCase:u}=q();return U({title:`${a.params.make?u(a.params.make):"Cars"} in ${u(a.params.city)}`}),(n,r)=>{const o=Y,m=T,b=Z;return p(),d("div",null,[e("div",ee,[w(b,null,{error:C(({error:c})=>[e("div",te,[oe,e("code",null,_(c),1),e("button",{class:"text-white bg-blue-400 px-10 py-3 rounded mt-4",onClick:k=>c.value=null}," Go Back ",8,re)])]),default:C(()=>[w(o),w(m)]),_:1})])])}}};export{ue as default};
