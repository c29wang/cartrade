import{e as w,o as a,c as o,a as e,b as f,t as m,f as h,L as g,U as p,V as x,O as $,l as k,F as C,r as y,H as L}from"./entry.8c71bdde.js";import{u as j}from"./fetch.d422b2e1.js";const D={class:"shadow rounded overflow-hidden flex justify-between mb-4"},N={class:"flex"},V=["src"],B={class:"p-3"},F={class:"text-2xl"},O={class:"text-blue-400"},M={class:"p-3 flex"},S={__name:"ListingCard",props:{listing:Object},emits:["deleteClick"],setup(t,{emit:s}){const n=w();return(c,i)=>{const r=x;return a(),o("div",D,[e("div",N,[e("img",{src:`${f(n).public.supabase.url}/storage/v1/object/public/images/${t.listing.image}`,alt:"",class:"w-80 mr-3 h-44"},null,8,V),e("div",B,[e("h1",F,m(t.listing.name),1),e("p",O,"$"+m(t.listing.price),1)])]),e("div",M,[h(r,{class:"text-blue-400 mr-4",to:`/profile/listings/view/${t.listing.id}`},{default:g(()=>[p("View Messages")]),_:1},8,["to"]),e("p",{class:"text-red-400 cursor-pointer",onClick:i[0]||(i[0]=d=>s("deleteClick",t.listing.id))}," Delete ")])])}}},U={class:"flex justify-between mt-24 items-center"},A=e("h1",{class:"text-6xl"},"My Listings",-1),E={class:"shadow rounded p-3 mt-5"},T={__name:"index",async setup(t){let s,n;const c=$(),{data:i,refresh:r}=([s,n]=k(()=>j(`/api/car/listings/user/${c.value.id}`,"$FmO4eLaDnh")),s=await s,n(),s),d=async l=>{await $fetch(`/api/car/listings/${l}`,{method:"delete"}),i.value=i.value.filter(u=>u.id!==l)};return(l,u)=>{const b=x,v=S;return a(),o("div",null,[e("div",U,[A,h(b,{to:"/profile/listings/create",class:"w-9 h-9 bg-blue-400 flex justify-center items-center rounded-full text-white font-bold cursor-pointer"},{default:g(()=>[p("+")]),_:1})]),e("div",E,[(a(!0),o(C,null,y(f(i),_=>(a(),L(v,{key:_.id,listing:_,onDeleteClick:d},null,8,["listing"]))),128))])])}}};export{T as default};
